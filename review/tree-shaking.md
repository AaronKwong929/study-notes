# 关于 Tree-Shaking

> tree-shaking 的消除原理 依赖于 ES6 的`模块特性`(ESM)

- ES Module 的特点

  - 只能作为模块顶层的语句出现

  - import 名只能是字符串常量

  - import 是 immutable 的

ES6 模块依赖关系是确定的，和运行时的状态无关，可以进行可靠的`静态分析`，这就是 tree-shaking 的基础。

`静态分析` - 不执行代码，从字面量上对代码进行分析，ES6 之前的模块化，比如动态 require 一个模块，只有执行后才知道引用的什么模块，这个就不能通过静态分析去做优化。

对顶层纯函数的效果好，类不太好消除 -> 容易影响执行
