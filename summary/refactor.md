# 关于后台重构的意义

> 无非将一万行代码拆分成三个三千行，单独仓库，有什么亮点吗？

这确实不是非常有技术难点的改动，但是对业务帮助是巨大的。

实际上，大部分的基建设施都谈不上技术难点，但是他们确实在解决问题。

分仓管理，首先第一个意义就是物理隔离，可以很大程度上优化项目的发版流程，避免牵一发而动全身。

在逻辑上把不同意义的模块收敛到模块本身，不但便于新入职同学尽量减少学习负担，渐进式地了解业务，也便于后续接盘的同学，减少历史包袱。

我觉得对于当时项目的困境而言，这样的操作带来的价值，是可以解决当时业务开发的困境的。

大多数技术都没什么价值，但能解决一个痛点问题，我觉得它就是一个亮点。

---

> 你只是完成了第一阶段，只是把后台拆分出来了，有考虑过第二阶段怎么执行吗?

分仓管理确实会带来 common 部分的管理问题，考虑到每个人的代码风格不一样，每个人反而想去自己实现一遍，通用代码会变得没那么通用。 copy 可以暂时性解决这个问题。

但后期强关联的公共组件越来越多，就可以倒逼推进项目公共组件库，带来公共组件维护的规范化和编码习惯统一化。回过头来看的话这个分仓是值得的。

对公共代码的处理考虑过以下几个方式：

私有 npm

每个包都要安装依赖，并没有优化单个项目的体积，并且 npm 包更新的话每个子应用都需要进行更新，更新成本比得上对每个项目的 common 文件夹复制粘贴，个人感觉不太可以接受。

组件动态注册到基座应用

组件动态注册（打包代码分割）到基座应用下，然后在 window 下暴露`getDynamicComponent`方法动态加载，子应用按需引入，这个的改造成本小，可以接受。
