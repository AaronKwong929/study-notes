# 二分查找

[具体攻略看这里](https://leetcode-cn.com/problems/search-insert-position/solution/te-bie-hao-yong-de-er-fen-cha-fa-fa-mo-ban-python-/)

[另一个详尽解释](https://leetcode-cn.com/problems/binary-search/solution/er-fen-cha-zhao-xiang-jie-by-labuladong/)

## 把待搜索的区间分为两个部分

左半 和 右半

一定不存在目标元素的区间在下一轮搜索不用考虑到

↑ mid 一定会被分到左/右区间内，产生两种写法

mid 在左区间：[left....mid] [mid+1......right] => left = mid + 1, right = mid

mid 在右区间：[left....mid-1] [mid....right] => left = mid, right = mid - 1

看下面这张图就好理解了

![](https://raw.githubusercontent.com/AaronKwong929/pictures/master/20210701174432.png)

## 总结

所有的二分查找都有 左闭右闭 / 左闭右开 的写法，两种写法都有固定对应的 循环条件 和 判断条件

为了方便记忆，全部二分都统一成**左闭右闭**写法

### 左闭右闭搭配题目条件，检查是否存在数组越界的情况（在 return 时额外处理）

左闭右闭：

1. left = 0, right = nums.length - 1

2. while(left <= right)

3. left = mid + 1 / right = mid - 1

## 标准模板

### 标准二分

```js
const bs = (nums, target) => {
    let left = 0,
        right = nums.length - 1;
    while (left <= right) {
        const mid = left + Math.floor((right - left) / 2);
        if (target === nums[mid]) return mid;
        else if (nums[mid] < target) left = mid + 1;
        else right = mid - 1;
    }
};
```

### 找左边界

> 结束循环的条件依然是 left = right + 1；区别于标准二分，找左边界是不断收缩右边界，即命中目标不直接返回，同时左闭右闭要检查数组越界情况

```js
const bsl = (nums, target) => {
    let left = 0,
        right = nums.length - 1;
    while (left <= right) {
        const mid = left + Math.floor((right - left) / 2);
        if (nums[mid] < target) left = mid + 1;
        else right = mid - 1;
    }
    if (left >= nums.length || nums[left] !== target) return -1;
    return left;
};
```

### 找右边界

```js
const bsr = (nums, right) => {
    let left = 0,
        right = nums.length - 1;
    while (left <= right) {
        const mid = left + Math.floor((right - left) / 2);
        if (nums[mid] <= target) left = mid + 1;
        else right = mid - 1;
    }
    if (right < 0 || nums[right] !== target) return -1;
    return right;
};
```

## 部分题目

### 704. 二分查找

```js
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {number}
 */
var search = function (nums, target) {
    let left = 0,
        right = nums.length - 1; // <-这里
    while (left <= right) {
        // ↑这里
        const mid = left + Math.floor((right - left) / 2);
        if (nums[mid] === target) return mid;
        else if (nums[mid] < target) left = mid + 1;
        // ↑这里
        else right = mid - 1; // <-这里
    }
    return -1;
};
```

### 35. 搜索插入位置（标准二分查找）

```js
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {number}
 */
var searchInsert = function (nums, target) {
    if (target < nums[0]) return 0; // 考虑特殊情况加快速度？
    if (target > nums[nums.length - 1]) return nums.length;
    let left = 0,
        right = nums.length - 1;
    while (left <= right) {
        const mid = left + Math.floor((right - left) / 2);
        if (nums[mid] < target) left = mid + 1;
        else {
            right = mid - 1;
        }
    }
    return left;
};
```
